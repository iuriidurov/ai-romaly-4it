# AI-Romaly: Музыкальный Агрегатор

Этот проект представляет собой полнофункциональный веб-сайт, разработанный как агрегатор AI-сгенерированной музыки. Платформа позволяет авторам загружать свои треки, а пользователям — слушать и скачивать их. Проект включает в себя систему аутентификации, разделение ролей (администратор и автор), персональные кабинеты для авторов и панель администрирования.

## Технологический стек

*   **Бэкенд:** Node.js, Express.js
*   **База данных:** MongoDB с использованием Mongoose
*   **Фронтенд:** HTML5, CSS3, ванильный JavaScript (ES6+)
*   **Аутентификация:** JSON Web Tokens (JWT)
*   **Загрузка файлов:** Multer

---

## Функциональность

### Для всех пользователей:
*   Просмотр и прослушивание треков на главной странице.
*   Поиск музыки.
*   Регистрация и аутентификация.
*   Восстановление пароля.

### Для авторов (после аутентификации):
*   Личный кабинет со списком загруженных треков.
*   Загрузка новых треков.
*   Удаление своих треков.
*   Просмотр списка других авторов.

### Для администраторов:
*   Доступ к панели управления.
*   Управление сборниками (создание, редактирование, удаление).
*   Управление пользователями (просмотр, удаление).

---

## Структура проекта и описание файлов

### Корневая директория (`/`)

*   **`server.js`**: Главный файл приложения. Инициализирует сервер, подключается к MongoDB, настраивает middleware и определяет основные маршруты API.
*   **`index.html`**: Главная страница сайта для всех пользователей.
*   **`author.html`**: Страница личного кабинета автора.
*   **`admin-collections.html`**: Страница для управления музыкальными сборниками (доступна только администраторам).
*   **`reset-password.html`**: Страница для установки нового пароля.
*   **`package.json`**: Файл с зависимостями и скриптами проекта.
*   **`README.md`** (этот файл): Документация по проекту.

### Директория `config/`

*   **`default.json`**: Файл конфигурации (строка подключения к БД, секретный ключ JWT).

### Директория `css/`

*   **`style.css`**: Единый файл стилей для всего приложения.

### Директория `js/`

*   **`main.js`**: Клиентский JS для `index.html` (логика плеера, модальные окна, загрузка треков).
*   **`author.js`**: Клиентский JS для `author.html` (загрузка треков автора, пагинация, удаление).
*   **`admin-collections.js`**: Клиентский JS для `admin-collections.html`. Управляет логикой CRUD (создание, чтение, обновление, удаление) для сборников.

### Директория `models/`

*   **`User.js`**: Mongoose-модель для пользователей (`name`, `emailOrPhone`, `password`, `role`).
*   **`Track.js`**: Mongoose-модель для треков (`title`, `author`, `filePath`, `collectionId`). Поле `collectionId` является ссылкой на модель `Collection`.
*   **`Collection.js`**: Mongoose-модель для сборников (`name`).

### Директория `controllers/`

*   **`userController.js`**: Логика для регистрации, входа, получения и сброса пароля пользователей.
*   **`trackController.js`**: Логика для получения, загрузки и удаления треков.
*   **`collectionController.js`**: Логика для CRUD-операций со сборниками.

### Директория `routes/`

*   **`users.js`**: API-маршруты для пользователей.
*   **`tracks.js`**: API-маршруты для треков.
*   **`collections.js`**: API-маршруты для сборников, защищенные middleware для проверки прав администратора.

### Директория `middleware/`

*   **`auth.js`**: Middleware для проверки JWT-токена и аутентификации пользователя.
*   **`admin.js`**: Middleware для защиты маршрутов. Проверяет, что у пользователя роль `admin`.

### Директория `uploads/`

*   Директория для хранения загруженных аудиофайлов (игнорируется Git).
